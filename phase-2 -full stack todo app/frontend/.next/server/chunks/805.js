"use strict";exports.id=805,exports.ids=[805],exports.modules={5366:(e,s,t)=>{t.d(s,{Z:()=>i});var a=t(326),r=t(7577),l=t(5047),o=t(5095);let i=({children:e,redirectTo:s="/login"})=>{let[t,i]=(0,r.useState)(null),d=(0,l.useRouter)();return((0,r.useEffect)(()=>{(async()=>{try{let e=await o.Z.validateToken();i(e.valid),e.valid||d.push(s)}catch(e){console.error("Authentication check failed:",e),i(!1),d.push(s)}})()},[d,s]),null===t)?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-lg",children:"Checking authentication..."})}):t?a.jsx(a.Fragment,{children:e}):null}},8097:(e,s,t)=>{t.d(s,{Z:()=>m});var a=t(326),r=t(7577);let l=({task:e,onToggleComplete:s,onUpdate:t,onDelete:l})=>{let[o,i]=(0,r.useState)(!1),[d,n]=(0,r.useState)(e.title),[c,u]=(0,r.useState)(e.description||""),[m,x]=(0,r.useState)(e.priority||"medium");return a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-5 transition-all duration-200 hover:shadow-md ${e.completed?"opacity-75":""}`,children:o?(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx("input",{type:"text",value:d,onChange:e=>n(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Task title"})}),a.jsx("div",{children:a.jsx("textarea",{value:c,onChange:e=>u(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Task description",rows:3})}),a.jsx("div",{children:(0,a.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[a.jsx("option",{value:"low",children:"Low Priority"}),a.jsx("option",{value:"medium",children:"Medium Priority"}),a.jsx("option",{value:"high",children:"High Priority"})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[a.jsx("button",{onClick:()=>{t(e.id,{title:d,description:c||void 0,priority:m}),i(!1)},className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save"}),a.jsx("button",{onClick:()=>{n(e.title),u(e.description||""),x(e.priority),i(!1)},className:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"})]})]}):a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[a.jsx("div",{className:"flex items-start",children:a.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>s(e.id),className:"h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mt-0.5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:`text-lg font-medium ${e.completed?"line-through text-gray-500":"text-gray-900"}`,children:e.title}),e.description&&a.jsx("p",{className:`mt-1 text-sm ${e.completed?"line-through text-gray-400":"text-gray-600"}`,children:e.description}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority||"medium")}`,children:[(e.priority||"medium").charAt(0).toUpperCase()+(e.priority||"medium").slice(1)," Priority"]}),e.due_date&&(0,a.jsxs)("span",{className:"inline-flex items-center text-xs text-gray-500",children:[a.jsx("svg",{className:"mr-1 h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(e.due_date).toLocaleDateString()]}),(0,a.jsxs)("span",{className:"inline-flex items-center text-xs text-gray-500",children:[a.jsx("svg",{className:"mr-1 h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 mt-2 sm:mt-0",children:[a.jsx("button",{onClick:()=>i(!0),className:"text-gray-400 hover:text-blue-600 transition-colors duration-200","aria-label":"Edit",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),a.jsx("button",{onClick:()=>l(e.id),className:"text-gray-400 hover:text-red-600 transition-colors duration-200","aria-label":"Delete",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})})})},o=({onSubmit:e,onCancel:s})=>{let[t,l]=(0,r.useState)(""),[o,i]=(0,r.useState)(""),[d,n]=(0,r.useState)("medium"),[c,u]=(0,r.useState)(""),[m,x]=(0,r.useState)("");return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Task"}),m&&a.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"text-sm text-red-700",children:m})}),(0,a.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),!t.trim()){x("Title is required");return}if(t.length>255){x("Title must be 255 characters or less");return}if(o.length>1e3){x("Description must be 1000 characters or less");return}x(""),e({title:t.trim(),description:o.trim()||void 0,completed:!1,due_date:c||void 0,priority:d,category:void 0,user_id:""}),l(""),i(""),n("medium"),u("")},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title *"}),a.jsx("input",{type:"text",id:"title",value:t,onChange:e=>l(e.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border",placeholder:"What needs to be done?"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),a.jsx("textarea",{id:"description",value:o,onChange:e=>i(e.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border",placeholder:"Add details...",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700",children:"Priority"}),(0,a.jsxs)("select",{id:"priority",value:d,onChange:e=>n(e.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700",children:"Due Date"}),a.jsx("input",{type:"date",id:"dueDate",value:c,onChange:e=>u(e.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-full sm:w-auto",children:"Cancel"}),a.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-full sm:w-auto",children:"Add Task"})]})]})]})},i=({type:e,message:s,onClose:t,autoDismiss:l=!0,duration:o=5e3})=>{let[i,d]=(0,r.useState)(!0),n={success:"text-green-800",error:"text-red-800",warning:"text-yellow-800",info:"text-blue-800"}[e],c={success:a.jsx("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:a.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),warning:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),info:a.jsx("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}[e];return((0,r.useEffect)(()=>{if(l&&i){let e=setTimeout(()=>{d(!1),t&&t()},o);return()=>clearTimeout(e)}},[l,o,t,i]),i)?a.jsx("div",{className:`rounded-md ${{success:"bg-green-50",error:"bg-red-50",warning:"bg-yellow-50",info:"bg-blue-50"}[e]} ${{success:"border-green-200",error:"border-red-200",warning:"border-yellow-200",info:"border-blue-200"}[e]} border p-4 mb-4`,children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:c}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:`text-sm ${n}`,children:s})}),t&&a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("div",{className:"-mx-1.5 -my-1.5",children:(0,a.jsxs)("button",{type:"button",onClick:()=>{d(!1),t()},className:`inline-flex rounded-md p-1.5 ${n} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-200`,children:[a.jsx("span",{className:"sr-only",children:"Dismiss"}),a.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})}):null};var d=t(1471),n=t(3741);class c{async getTasks(){try{n.Z.info("Fetching all tasks for authenticated user");let e=await d.Z.get("/api/tasks");return n.Z.info("Tasks fetched successfully",{count:e.data.tasks?.length||e.data.length}),e.data.tasks||e.data}catch(e){throw n.Z.error("Error fetching tasks",{error:e.response?.data?.message||e.message},e),Error(e.response?.data?.message||"Failed to fetch tasks")}}async createTask(e){try{n.Z.info("Creating new task",{title:e.title});let s=await d.Z.post("/api/tasks",e);return n.Z.info("Task created successfully",{taskId:s.data.id,title:s.data.title}),s.data}catch(s){throw n.Z.error("Error creating task",{title:e.title,error:s.response?.data?.message||s.message},s),Error(s.response?.data?.message||"Failed to create task")}}async updateTask(e,s){try{n.Z.info("Updating task",{taskId:e,updates:Object.keys(s)});let t=await d.Z.put(`/api/tasks/${e}`,s);return n.Z.info("Task updated successfully",{taskId:t.data.id,title:t.data.title}),t.data}catch(t){throw n.Z.error("Error updating task",{taskId:e,updates:s,error:t.response?.data?.message||t.message},t),Error(t.response?.data?.message||"Failed to update task")}}async deleteTask(e){try{n.Z.info("Deleting task",{taskId:e}),await d.Z.delete(`/api/tasks/${e}`),n.Z.info("Task deleted successfully",{taskId:e})}catch(s){throw n.Z.error("Error deleting task",{taskId:e,error:s.response?.data?.message||s.message},s),Error(s.response?.data?.message||"Failed to delete task")}}async toggleTaskCompletion(e){try{n.Z.info("Toggling task completion",{taskId:e});let s=await d.Z.patch(`/api/tasks/${e}/complete`,{completed:!0});return n.Z.info("Task completion toggled successfully",{taskId:s.data.id,completed:s.data.completed}),s.data}catch(s){throw n.Z.error("Error toggling task completion",{taskId:e,error:s.response?.data?.message||s.message},s),Error(s.response?.data?.message||"Failed to toggle task completion")}}async getTaskById(e){try{n.Z.info("Fetching specific task",{taskId:e});let s=await d.Z.get(`/api/tasks/${e}`);return n.Z.info("Task fetched successfully",{taskId:s.data.id,title:s.data.title}),s.data}catch(s){throw n.Z.error("Error fetching task by ID",{taskId:e,error:s.response?.data?.message||s.message},s),Error(s.response?.data?.message||"Failed to fetch task")}}}let u=new c,m=()=>{let[e,s]=(0,r.useState)([]),[t,d]=(0,r.useState)(!0),[n,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{g()},[]);let g=async()=>{try{d(!0);let e=await u.getTasks();s(e)}catch(e){x({type:"error",message:e.message||"Failed to load tasks. Please try again."})}finally{d(!1)}},h=async t=>{try{let a=await u.createTask(t);s([a,...e]),c(!1),x({type:"success",message:"Task created successfully!"})}catch(e){x({type:"error",message:e.message||"Failed to create task. Please try again."})}},p=async(t,a)=>{try{let r=await u.updateTask(t,a);s(e.map(e=>e.id===t?r:e)),x({type:"success",message:"Task updated successfully!"})}catch(e){x({type:"error",message:e.message||"Failed to update task. Please try again."})}},f=async t=>{try{await u.deleteTask(t),s(e.filter(e=>e.id!==t)),x({type:"success",message:"Task deleted successfully!"})}catch(e){x({type:"error",message:e.message||"Failed to delete task. Please try again."})}},b=async t=>{try{let a=e.find(e=>e.id===t);if(a){let r=await u.updateTask(t,{completed:!a.completed});s(e.map(e=>e.id===t?r:e)),x({type:"success",message:`Task marked as ${a.completed?"incomplete":"completed"}!`})}}catch(e){x({type:"error",message:e.message||"Failed to update task status. Please try again."})}};return t?(0,a.jsxs)("div",{className:"flex justify-center items-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading tasks..."})]}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[m&&a.jsx(i,{type:m.type,message:m.message,onClose:()=>{x(null)}}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Tasks"}),a.jsx("button",{onClick:()=>c(!n),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium w-full sm:w-auto",children:n?"Cancel":"+ Add Task"})]}),n&&a.jsx("div",{className:"mb-6 bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:a.jsx(o,{onSubmit:h,onCancel:()=>c(!1)})}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tasks"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new task."}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create new task"})})]}):a.jsx("div",{className:"space-y-4",children:e.map(e=>a.jsx(l,{task:e,onToggleComplete:b,onUpdate:p,onDelete:f},e.id))})]})}}};