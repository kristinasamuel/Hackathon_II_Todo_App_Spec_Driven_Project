"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{6365:function(e,t,s){var r=s(7437),a=s(2265),o=s(9376),l=s(9636);t.Z=e=>{let{children:t,redirectTo:s="/login"}=e,[n,i]=(0,a.useState)(null),d=(0,o.useRouter)();return((0,a.useEffect)(()=>{(async()=>{try{let e=await l.Z.validateToken();i(e.valid),e.valid||d.push(s)}catch(e){console.error("Authentication check failed:",e),i(!1),d.push(s)}})()},[d,s]),null===n)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"text-lg",children:"Checking authentication..."})}):n?(0,r.jsx)(r.Fragment,{children:t}):null}},3714:function(e,t,s){s.d(t,{Z:function(){return m}});var r=s(7437),a=s(2265),o=e=>{let{task:t,onToggleComplete:s,onUpdate:o,onDelete:l}=e,[n,i]=(0,a.useState)(!1),[d,c]=(0,a.useState)(t.title),[u,m]=(0,a.useState)(t.description||""),[g,h]=(0,a.useState)(t.priority||"medium");return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5 transition-all duration-200 hover:shadow-md ".concat(t.completed?"opacity-75":""),children:n?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Task title"})}),(0,r.jsx)("div",{children:(0,r.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Task description",rows:3})}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{value:g,onChange:e=>h(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"low",children:"Low Priority"}),(0,r.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,r.jsx)("option",{value:"high",children:"High Priority"})]})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{o(t.id,{title:d,description:u||void 0,priority:g}),i(!1)},className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save"}),(0,r.jsx)("button",{onClick:()=>{c(t.title),m(t.description||""),h(t.priority),i(!1)},className:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"})]})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[(0,r.jsx)("div",{className:"flex items-start",children:(0,r.jsx)("input",{type:"checkbox",checked:t.completed,onChange:()=>s(t.id),className:"h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mt-0.5"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-lg font-medium ".concat(t.completed?"line-through text-gray-500":"text-gray-900"),children:t.title}),t.description&&(0,r.jsx)("p",{className:"mt-1 text-sm ".concat(t.completed?"line-through text-gray-400":"text-gray-600"),children:t.description}),(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(t.priority||"medium")),children:[(t.priority||"medium").charAt(0).toUpperCase()+(t.priority||"medium").slice(1)," Priority"]}),t.due_date&&(0,r.jsxs)("span",{className:"inline-flex items-center text-xs text-gray-500",children:[(0,r.jsx)("svg",{className:"mr-1 h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(t.due_date).toLocaleDateString()]}),(0,r.jsxs)("span",{className:"inline-flex items-center text-xs text-gray-500",children:[(0,r.jsx)("svg",{className:"mr-1 h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(t.created_at).toLocaleDateString()]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2 mt-2 sm:mt-0",children:[(0,r.jsx)("button",{onClick:()=>i(!0),className:"text-gray-400 hover:text-blue-600 transition-colors duration-200","aria-label":"Edit",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),(0,r.jsx)("button",{onClick:()=>l(t.id),className:"text-gray-400 hover:text-red-600 transition-colors duration-200","aria-label":"Delete",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})})})},l=e=>{let{onSubmit:t,onCancel:s}=e,[o,l]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[d,c]=(0,a.useState)("medium"),[u,m]=(0,a.useState)(""),[g,h]=(0,a.useState)("");return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Task"}),g&&(0,r.jsx)("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:(0,r.jsx)("div",{className:"text-sm text-red-700",children:g})}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!o.trim()){h("Title is required");return}if(o.length>255){h("Title must be 255 characters or less");return}if(n.length>1e3){h("Description must be 1000 characters or less");return}h(""),t({title:o.trim(),description:n.trim()||void 0,completed:!1,due_date:u||void 0,priority:d,category:void 0,user_id:""}),l(""),i(""),c("medium"),m("")},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title *"}),(0,r.jsx)("input",{type:"text",id:"title",value:o,onChange:e=>l(e.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border",placeholder:"What needs to be done?"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,r.jsx)("textarea",{id:"description",value:n,onChange:e=>i(e.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border",placeholder:"Add details...",rows:3})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700",children:"Priority"}),(0,r.jsxs)("select",{id:"priority",value:d,onChange:e=>c(e.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border",children:[(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700",children:"Due Date"}),(0,r.jsx)("input",{type:"date",id:"dueDate",value:u,onChange:e=>m(e.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-full sm:w-auto",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-full sm:w-auto",children:"Add Task"})]})]})]})},n=e=>{let{type:t,message:s,onClose:o,autoDismiss:l=!0,duration:n=5e3}=e,[i,d]=(0,a.useState)(!0),c={success:"text-green-800",error:"text-red-800",warning:"text-yellow-800",info:"text-blue-800"}[t],u={success:(0,r.jsx)("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),warning:(0,r.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),info:(0,r.jsx)("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}[t];return((0,a.useEffect)(()=>{if(l&&i){let e=setTimeout(()=>{d(!1),o&&o()},n);return()=>clearTimeout(e)}},[l,n,o,i]),i)?(0,r.jsx)("div",{className:"rounded-md ".concat({success:"bg-green-50",error:"bg-red-50",warning:"bg-yellow-50",info:"bg-blue-50"}[t]," ").concat({success:"border-green-200",error:"border-red-200",warning:"border-yellow-200",info:"border-blue-200"}[t]," border p-4 mb-4"),children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:u}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm ".concat(c),children:s})}),o&&(0,r.jsx)("div",{className:"ml-auto pl-3",children:(0,r.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,r.jsxs)("button",{type:"button",onClick:()=>{d(!1),o()},className:"inline-flex rounded-md p-1.5 ".concat(c," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-200"),children:[(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,r.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})}):null},i=s(8223),d=s(7903);class c{async getTasks(){var e,t,s,r,a;try{d.Z.info("Fetching all tasks for authenticated user");let t=await i.Z.get("/api/tasks");return d.Z.info("Tasks fetched successfully",{count:(null===(e=t.data.tasks)||void 0===e?void 0:e.length)||t.data.length}),t.data.tasks||t.data}catch(e){throw d.Z.error("Error fetching tasks",{error:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||e.message},e),Error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to fetch tasks")}}async createTask(e){try{d.Z.info("Creating new task",{title:e.title});let t=await i.Z.post("/api/tasks",e);return d.Z.info("Task created successfully",{taskId:t.data.id,title:t.data.title}),t.data}catch(o){var t,s,r,a;throw d.Z.error("Error creating task",{title:e.title,error:(null===(s=o.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||o.message},o),Error((null===(a=o.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to create task")}}async updateTask(e,t){try{d.Z.info("Updating task",{taskId:e,updates:Object.keys(t)});let s=await i.Z.put("/api/tasks/".concat(e),t);return d.Z.info("Task updated successfully",{taskId:s.data.id,title:s.data.title}),s.data}catch(l){var s,r,a,o;throw d.Z.error("Error updating task",{taskId:e,updates:t,error:(null===(r=l.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||l.message},l),Error((null===(o=l.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Failed to update task")}}async deleteTask(e){try{d.Z.info("Deleting task",{taskId:e}),await i.Z.delete("/api/tasks/".concat(e)),d.Z.info("Task deleted successfully",{taskId:e})}catch(o){var t,s,r,a;throw d.Z.error("Error deleting task",{taskId:e,error:(null===(s=o.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||o.message},o),Error((null===(a=o.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to delete task")}}async toggleTaskCompletion(e){try{d.Z.info("Toggling task completion",{taskId:e});let t=await i.Z.patch("/api/tasks/".concat(e,"/complete"),{completed:!0});return d.Z.info("Task completion toggled successfully",{taskId:t.data.id,completed:t.data.completed}),t.data}catch(o){var t,s,r,a;throw d.Z.error("Error toggling task completion",{taskId:e,error:(null===(s=o.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||o.message},o),Error((null===(a=o.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to toggle task completion")}}async getTaskById(e){try{d.Z.info("Fetching specific task",{taskId:e});let t=await i.Z.get("/api/tasks/".concat(e));return d.Z.info("Task fetched successfully",{taskId:t.data.id,title:t.data.title}),t.data}catch(o){var t,s,r,a;throw d.Z.error("Error fetching task by ID",{taskId:e,error:(null===(s=o.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||o.message},o),Error((null===(a=o.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to fetch task")}}}var u=new c,m=()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[d,c]=(0,a.useState)(!1),[m,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{h()},[]);let h=async()=>{try{i(!0);let e=await u.getTasks();t(e)}catch(e){g({type:"error",message:e.message||"Failed to load tasks. Please try again."})}finally{i(!1)}},f=async s=>{try{let r=await u.createTask(s);t([r,...e]),c(!1),g({type:"success",message:"Task created successfully!"})}catch(e){g({type:"error",message:e.message||"Failed to create task. Please try again."})}},v=async(s,r)=>{try{let a=await u.updateTask(s,r);t(e.map(e=>e.id===s?a:e)),g({type:"success",message:"Task updated successfully!"})}catch(e){g({type:"error",message:e.message||"Failed to update task. Please try again."})}},p=async s=>{try{await u.deleteTask(s),t(e.filter(e=>e.id!==s)),g({type:"success",message:"Task deleted successfully!"})}catch(e){g({type:"error",message:e.message||"Failed to delete task. Please try again."})}},x=async s=>{try{let r=e.find(e=>e.id===s);if(r){let a=await u.updateTask(s,{completed:!r.completed});t(e.map(e=>e.id===s?a:e)),g({type:"success",message:"Task marked as ".concat(r.completed?"incomplete":"completed","!")})}}catch(e){g({type:"error",message:e.message||"Failed to update task status. Please try again."})}};return s?(0,r.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading tasks..."})]}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[m&&(0,r.jsx)(n,{type:m.type,message:m.message,onClose:()=>{g(null)}}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Tasks"}),(0,r.jsx)("button",{onClick:()=>c(!d),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium w-full sm:w-auto",children:d?"Cancel":"+ Add Task"})]}),d&&(0,r.jsx)("div",{className:"mb-6 bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,r.jsx)(l,{onSubmit:f,onCancel:()=>c(!1)})}),0===e.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tasks"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new task."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create new task"})})]}):(0,r.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,r.jsx)(o,{task:e,onToggleComplete:x,onUpdate:v,onDelete:p},e.id))})]})}},8223:function(e,t,s){var r=s(3464),a=s(7903);let o=r.Z.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("jwt_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(a.Z.error("API request error",{error:e.message},e),Promise.reject(e))),o.interceptors.response.use(e=>e,async e=>{var t,s,r,o,l,n;let i=e.config;if(a.Z.error("API response error",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(s=e.config)||void 0===s?void 0:s.method,status:null===(r=e.response)||void 0===r?void 0:r.status,statusText:null===(o=e.response)||void 0===o?void 0:o.statusText,message:e.message},e),!e.response)return a.Z.warn("Network connectivity issue detected",{message:e.message||"Network error"}),Promise.reject(e);if(401===e.response.status&&!i._retry){a.Z.warn("Token expired or invalid, removing tokens"),localStorage.removeItem("jwt_token"),localStorage.removeItem("refresh_token");let t=window.location.pathname;return["/dashboard","/tasks","/profile"].some(e=>t.startsWith(e))&&(window.location.href="/login"),Promise.reject(e)}return e.response.status>=500&&a.Z.error("Backend API unavailable",{status:e.response.status,statusText:e.response.statusText,url:null===(l=e.config)||void 0===l?void 0:l.url}),403===e.response.status&&(a.Z.warn("Unauthorized access attempt",{status:e.response.status,url:null===(n=e.config)||void 0===n?void 0:n.url,data:e.response.data}),window.location.href="/login"),Promise.reject(e)}),t.Z=o},9636:function(e,t,s){var r=s(8223),a=s(7903);class o{async login(e){var t,s,o,l,n;try{a.Z.info("Attempting user login",{email:e.email});let s=await r.Z.post("/auth/login",e);if(s.data&&s.data.token){let{token:e,refresh_token:r}=s.data;return localStorage.setItem("jwt_token",e),r&&localStorage.setItem("refresh_token",r),a.Z.info("User login successful",{user_id:null===(t=s.data.user)||void 0===t?void 0:t.user_id}),{user:s.data.user,token:e}}return a.Z.warn("Login failed - no token returned",{email:e.email}),null}catch(t){throw a.Z.error("Login error",{email:e.email,error:(null===(o=t.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.message)||t.message},t),Error((null===(n=t.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)||"Login failed")}}async signup(e){var t,s,o,l,n;try{a.Z.info("Attempting user signup",{email:e.email});let s=await r.Z.post("/auth/signup",e);if(s.data&&s.data.token){let{token:e,refresh_token:r}=s.data;return localStorage.setItem("jwt_token",e),r&&localStorage.setItem("refresh_token",r),a.Z.info("User signup successful",{user_id:null===(t=s.data.user)||void 0===t?void 0:t.user_id}),{user:s.data.user,token:e}}return a.Z.warn("Signup failed - no token returned",{email:e.email}),null}catch(t){throw a.Z.error("Signup error",{email:e.email,error:(null===(o=t.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.message)||t.message},t),Error((null===(n=t.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)||"Signup failed")}}logout(){let e=this.getToken();a.Z.info("User logout initiated",{has_token:!!e}),localStorage.removeItem("jwt_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",a.Z.info("User logout completed")}async getCurrentUser(){try{var e;let t=await r.Z.get("/auth/me");return a.Z.info("Current user info retrieved",{user_id:null===(e=t.data)||void 0===e?void 0:e.user_id}),t.data}catch(e){return a.Z.error("Error getting current user info",{error:e.message},e),null}}async validateToken(){var e,t;try{let t=localStorage.getItem("jwt_token");if(!t)return a.Z.info("Token validation failed - no token found"),{valid:!1,user_id:""};a.Z.debug("Validating JWT token");let s=await r.Z.post("/auth/validate",{},{headers:{Authorization:"Bearer ".concat(t)}});return a.Z.info("Token validation successful",{user_id:null===(e=s.data)||void 0===e?void 0:e.user_id}),s.data}catch(e){return a.Z.error("Token validation error",{error:e.message,status:null===(t=e.response)||void 0===t?void 0:t.status},e),{valid:!1,user_id:"",error:e.message}}}isAuthenticated(){let e=localStorage.getItem("jwt_token");return a.Z.debug("Authentication check",{is_authenticated:!!e}),!!e}getToken(){return localStorage.getItem("jwt_token")}getRefreshToken(){return localStorage.getItem("refresh_token")}async refreshToken(){try{let e=this.getRefreshToken();if(a.Z.info("Attempting token refresh"),!e)return a.Z.warn("Token refresh failed - no refresh token available"),null;let t=await r.Z.post("/auth/refresh",{},{headers:{Authorization:"Bearer ".concat(e)}});if(t.data&&t.data.access_token){let e=t.data.access_token;return localStorage.setItem("jwt_token",e),t.data.refresh_token&&localStorage.setItem("refresh_token",t.data.refresh_token),a.Z.info("Token refresh successful"),e}return a.Z.warn("Token refresh failed - no access token in response"),null}catch(r){var e,t,s,o;throw a.Z.error("Token refresh error",{error:(null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||r.message},r),this.logout(),Error((null===(o=r.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.message)||"Token refresh failed")}}}t.Z=new o},7903:function(e,t){class s{generateSessionId(){return"sess_"+Math.random().toString(36).substr(2,9)+"_"+Date.now()}shouldLog(e){let t=s.LOG_LEVELS[s.currentLogLevel];return s.LOG_LEVELS[e]>=t}formatLog(e){return"[".concat(e.timestamp,"] [").concat(e.level.toUpperCase(),"] [Session: ").concat(e.session_id,"] - ").concat(e.message).concat(e.context?" | Context: ".concat(JSON.stringify(e.context)):"")}logToConsole(e){let t=this.formatLog(e);switch(e.level){case"error":console.error(t);break;case"warn":console.warn(t);break;case"info":console.info(t);break;case"debug":console.debug(t);break;default:console.log(t)}}async logToRemote(e){}info(e,t){if(this.shouldLog("INFO")){let s={timestamp:new Date().toISOString(),level:"info",message:e,context:t,session_id:this.sessionId};this.logToConsole(s),this.logToRemote(s)}}warn(e,t){if(this.shouldLog("WARN")){let s={timestamp:new Date().toISOString(),level:"warn",message:e,context:t,session_id:this.sessionId};this.logToConsole(s),this.logToRemote(s)}}error(e,t,s){if(this.shouldLog("ERROR")){let r={timestamp:new Date().toISOString(),level:"error",message:e,context:{...t,...s&&{error_message:s.message,error_stack:s.stack,error_name:s.name}},session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}debug(e,t){if(this.shouldLog("DEBUG")){let s={timestamp:new Date().toISOString(),level:"debug",message:e,context:t,session_id:this.sessionId};this.logToConsole(s),this.logToRemote(s)}}setLogLevel(e){s.LOG_LEVELS.hasOwnProperty(e)?s.currentLogLevel=e:console.warn("Invalid log level: ".concat(e,". Valid levels: ").concat(Object.keys(s.LOG_LEVELS).join(", ")))}constructor(){this.sessionId=this.generateSessionId()}}s.LOG_LEVELS={DEBUG:0,INFO:1,WARN:2,ERROR:3},s.currentLogLevel="INFO";let r=new s;t.Z=r}}]);