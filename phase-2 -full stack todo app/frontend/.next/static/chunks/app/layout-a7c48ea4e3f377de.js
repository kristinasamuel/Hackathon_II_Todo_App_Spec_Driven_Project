(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1120:function(e,t,r){Promise.resolve().then(r.t.bind(r,4811,23)),Promise.resolve().then(r.bind(r,2416)),Promise.resolve().then(r.t.bind(r,9268,23))},2416:function(e,t,r){"use strict";var s=r(7437),o=r(2265),a=r(7648),n=r(9376),l=r(9636);t.default=()=>{let[e,t]=(0,o.useState)(!1),[r,i]=(0,o.useState)(""),[d,c]=(0,o.useState)(!1),u=(0,n.usePathname)();(0,o.useEffect)(()=>{(async()=>{try{let e=await l.Z.validateToken();t(e.valid),e.valid&&e.email&&i(e.email)}catch(e){console.error("Auth check failed:",e)}})()},[]);let g=()=>{l.Z.logout()};return"/login"===u||"/signup"===u?null:(0,s.jsxs)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:[(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,s.jsxs)(a.default,{href:"/",className:"text-2xl font-bold text-gray-900 tracking-tight",children:[(0,s.jsx)("span",{className:"text-blue-600",children:"TaskManager"}),(0,s.jsx)("span",{className:"text-gray-900",children:" Pro"})]})}),(0,s.jsxs)("nav",{className:"hidden md:ml-10 md:flex md:space-x-8",children:[(0,s.jsx)(a.default,{href:"/dashboard",className:"inline-flex items-center px-1 pt-1 text-sm font-medium ".concat("/dashboard"===u?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-900 hover:border-gray-300"),children:"Dashboard"}),(0,s.jsx)(a.default,{href:"/tasks",className:"inline-flex items-center px-1 pt-1 text-sm font-medium ".concat("/tasks"===u?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-900 hover:border-gray-300"),children:"Tasks"})]})]}),(0,s.jsx)("div",{className:"flex items-center md:hidden",children:(0,s.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-controls":"mobile-menu","aria-expanded":d,onClick:()=>c(!d),children:[(0,s.jsx)("span",{className:"sr-only",children:"Open main menu"}),d?(0,s.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):(0,s.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})}),(0,s.jsx)("div",{className:"hidden md:flex items-center",children:e?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-8 w-8 rounded-full bg-gray-200 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:r.split("@")[0]}),(0,s.jsx)("p",{className:"text-xs font-medium text-gray-500 truncate",children:r})]})]}),(0,s.jsx)("button",{onClick:g,className:"ml-4 px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Logout"})]}):(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(a.default,{href:"/login",className:"px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Log in"}),(0,s.jsx)(a.default,{href:"/signup",className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign up"})]})})]})}),d&&(0,s.jsx)("div",{className:"md:hidden",id:"mobile-menu",children:(0,s.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[(0,s.jsx)(a.default,{href:"/dashboard",className:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium ".concat("/dashboard"===u?"bg-blue-50 border-blue-600 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800"),children:"Dashboard"}),(0,s.jsx)(a.default,{href:"/tasks",className:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium ".concat("/tasks"===u?"bg-blue-50 border-blue-600 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800"),children:"Tasks"}),e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"block pl-3 pr-4 py-2 text-base font-medium text-gray-800",children:["Welcome, ",r.split("@")[0]]}),(0,s.jsx)("button",{onClick:g,className:"block w-full text-left pl-3 pr-4 py-2 text-base font-medium text-red-600 hover:bg-red-50",children:"Logout"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.default,{href:"/login",className:"block pl-3 pr-4 py-2 text-base font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-800",children:"Log in"}),(0,s.jsx)(a.default,{href:"/signup",className:"block pl-3 pr-4 py-2 text-base font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-800",children:"Sign up"})]})]})})]})}},8223:function(e,t,r){"use strict";var s=r(3464),o=r(7903);let a=s.Z.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("jwt_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(o.Z.error("API request error",{error:e.message},e),Promise.reject(e))),a.interceptors.response.use(e=>e,async e=>{var t,r,s,a,n,l;let i=e.config;if(o.Z.error("API response error",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(r=e.config)||void 0===r?void 0:r.method,status:null===(s=e.response)||void 0===s?void 0:s.status,statusText:null===(a=e.response)||void 0===a?void 0:a.statusText,message:e.message},e),!e.response)return o.Z.warn("Network connectivity issue detected",{message:e.message||"Network error"}),Promise.reject(e);if(401===e.response.status&&!i._retry){o.Z.warn("Token expired or invalid, removing tokens"),localStorage.removeItem("jwt_token"),localStorage.removeItem("refresh_token");let t=window.location.pathname;return["/dashboard","/tasks","/profile"].some(e=>t.startsWith(e))&&(window.location.href="/login"),Promise.reject(e)}return e.response.status>=500&&o.Z.error("Backend API unavailable",{status:e.response.status,statusText:e.response.statusText,url:null===(n=e.config)||void 0===n?void 0:n.url}),403===e.response.status&&(o.Z.warn("Unauthorized access attempt",{status:e.response.status,url:null===(l=e.config)||void 0===l?void 0:l.url,data:e.response.data}),window.location.href="/login"),Promise.reject(e)}),t.Z=a},9636:function(e,t,r){"use strict";var s=r(8223),o=r(7903);class a{async login(e){var t,r,a,n,l;try{o.Z.info("Attempting user login",{email:e.email});let r=await s.Z.post("/auth/login",e);if(r.data&&r.data.token){let{token:e,refresh_token:s}=r.data;return localStorage.setItem("jwt_token",e),s&&localStorage.setItem("refresh_token",s),o.Z.info("User login successful",{user_id:null===(t=r.data.user)||void 0===t?void 0:t.user_id}),{user:r.data.user,token:e}}return o.Z.warn("Login failed - no token returned",{email:e.email}),null}catch(t){throw o.Z.error("Login error",{email:e.email,error:(null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||t.message},t),Error((null===(l=t.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||"Login failed")}}async signup(e){var t,r,a,n,l;try{o.Z.info("Attempting user signup",{email:e.email});let r=await s.Z.post("/auth/signup",e);if(r.data&&r.data.token){let{token:e,refresh_token:s}=r.data;return localStorage.setItem("jwt_token",e),s&&localStorage.setItem("refresh_token",s),o.Z.info("User signup successful",{user_id:null===(t=r.data.user)||void 0===t?void 0:t.user_id}),{user:r.data.user,token:e}}return o.Z.warn("Signup failed - no token returned",{email:e.email}),null}catch(t){throw o.Z.error("Signup error",{email:e.email,error:(null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||t.message},t),Error((null===(l=t.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||"Signup failed")}}logout(){let e=this.getToken();o.Z.info("User logout initiated",{has_token:!!e}),localStorage.removeItem("jwt_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",o.Z.info("User logout completed")}async getCurrentUser(){try{var e;let t=await s.Z.get("/auth/me");return o.Z.info("Current user info retrieved",{user_id:null===(e=t.data)||void 0===e?void 0:e.user_id}),t.data}catch(e){return o.Z.error("Error getting current user info",{error:e.message},e),null}}async validateToken(){var e,t;try{let t=localStorage.getItem("jwt_token");if(!t)return o.Z.info("Token validation failed - no token found"),{valid:!1,user_id:""};o.Z.debug("Validating JWT token");let r=await s.Z.post("/auth/validate",{},{headers:{Authorization:"Bearer ".concat(t)}});return o.Z.info("Token validation successful",{user_id:null===(e=r.data)||void 0===e?void 0:e.user_id}),r.data}catch(e){return o.Z.error("Token validation error",{error:e.message,status:null===(t=e.response)||void 0===t?void 0:t.status},e),{valid:!1,user_id:"",error:e.message}}}isAuthenticated(){let e=localStorage.getItem("jwt_token");return o.Z.debug("Authentication check",{is_authenticated:!!e}),!!e}getToken(){return localStorage.getItem("jwt_token")}getRefreshToken(){return localStorage.getItem("refresh_token")}async refreshToken(){try{let e=this.getRefreshToken();if(o.Z.info("Attempting token refresh"),!e)return o.Z.warn("Token refresh failed - no refresh token available"),null;let t=await s.Z.post("/auth/refresh",{},{headers:{Authorization:"Bearer ".concat(e)}});if(t.data&&t.data.access_token){let e=t.data.access_token;return localStorage.setItem("jwt_token",e),t.data.refresh_token&&localStorage.setItem("refresh_token",t.data.refresh_token),o.Z.info("Token refresh successful"),e}return o.Z.warn("Token refresh failed - no access token in response"),null}catch(s){var e,t,r,a;throw o.Z.error("Token refresh error",{error:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||s.message},s),this.logout(),Error((null===(a=s.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Token refresh failed")}}}t.Z=new a},7903:function(e,t){"use strict";class r{generateSessionId(){return"sess_"+Math.random().toString(36).substr(2,9)+"_"+Date.now()}shouldLog(e){let t=r.LOG_LEVELS[r.currentLogLevel];return r.LOG_LEVELS[e]>=t}formatLog(e){return"[".concat(e.timestamp,"] [").concat(e.level.toUpperCase(),"] [Session: ").concat(e.session_id,"] - ").concat(e.message).concat(e.context?" | Context: ".concat(JSON.stringify(e.context)):"")}logToConsole(e){let t=this.formatLog(e);switch(e.level){case"error":console.error(t);break;case"warn":console.warn(t);break;case"info":console.info(t);break;case"debug":console.debug(t);break;default:console.log(t)}}async logToRemote(e){}info(e,t){if(this.shouldLog("INFO")){let r={timestamp:new Date().toISOString(),level:"info",message:e,context:t,session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}warn(e,t){if(this.shouldLog("WARN")){let r={timestamp:new Date().toISOString(),level:"warn",message:e,context:t,session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}error(e,t,r){if(this.shouldLog("ERROR")){let s={timestamp:new Date().toISOString(),level:"error",message:e,context:{...t,...r&&{error_message:r.message,error_stack:r.stack,error_name:r.name}},session_id:this.sessionId};this.logToConsole(s),this.logToRemote(s)}}debug(e,t){if(this.shouldLog("DEBUG")){let r={timestamp:new Date().toISOString(),level:"debug",message:e,context:t,session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}setLogLevel(e){r.LOG_LEVELS.hasOwnProperty(e)?r.currentLogLevel=e:console.warn("Invalid log level: ".concat(e,". Valid levels: ").concat(Object.keys(r.LOG_LEVELS).join(", ")))}constructor(){this.sessionId=this.generateSessionId()}}r.LOG_LEVELS={DEBUG:0,INFO:1,WARN:2,ERROR:3},r.currentLogLevel="INFO";let s=new r;t.Z=s},9268:function(){},4811:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[857,301,648,971,117,744],function(){return e(e.s=1120)}),_N_E=e.O()}]);