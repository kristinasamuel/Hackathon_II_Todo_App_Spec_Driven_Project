(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{7129:function(e,t,r){Promise.resolve().then(r.bind(r,8138))},8138:function(e,t,r){"use strict";r.r(t);var o=r(7437),s=r(2265),a=r(7648),n=r(9376),l=r(9636);t.default=()=>{let[e,t]=(0,s.useState)(""),[r,i]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[g,h]=(0,s.useState)(""),[f,v]=(0,s.useState)(!1),p=(0,n.useRouter)(),x=async t=>{if(t.preventDefault(),v(!0),h(""),d!==c){h("Passwords do not match"),v(!1);return}if(d.length<6){h("Password must be at least 6 characters"),v(!1);return}try{await l.Z.signup({email:r,password:d,name:e})?(p.push("/dashboard"),p.refresh()):h("Signup failed. Please try again.")}catch(e){h(e.message||"Signup failed")}finally{v(!1)}};return(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:(0,o.jsxs)("div",{className:"max-w-md w-full",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,o.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,o.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Join TaskManager Pro today and boost your productivity"})]}),(0,o.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,o.jsxs)("form",{className:"space-y-6",onSubmit:x,children:[g&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,o.jsx)("p",{className:"text-sm text-red-700 font-medium",children:g})]})}),(0,o.jsxs)("div",{className:"space-y-5",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,o.jsx)("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors duration-200 text-gray-900 placeholder-gray-500",placeholder:"Enter your full name"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,o.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors duration-200 text-gray-900 placeholder-gray-500",placeholder:"Enter your email address"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,o.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:d,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors duration-200 text-gray-900 placeholder-gray-500",placeholder:"Create a strong password"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,o.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,value:c,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors duration-200 text-gray-900 placeholder-gray-500",placeholder:"Confirm your password"})]})]}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"submit",disabled:f,className:"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:f?(0,o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,o.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})})]}),(0,o.jsx)("div",{className:"mt-6 text-center",children:(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,o.jsx)(a.default,{href:"/login",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200",children:"Sign in"})]})})]}),(0,o.jsx)("div",{className:"mt-8 text-center",children:(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["By signing up, you agree to our"," ",(0,o.jsx)("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:"Terms of Service"})," ","and"," ",(0,o.jsx)("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:"Privacy Policy"})]})})]})})}},8223:function(e,t,r){"use strict";var o=r(3464),s=r(7903);let a=o.Z.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("jwt_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(s.Z.error("API request error",{error:e.message},e),Promise.reject(e))),a.interceptors.response.use(e=>e,async e=>{var t,r,o,a,n,l;let i=e.config;if(s.Z.error("API response error",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(r=e.config)||void 0===r?void 0:r.method,status:null===(o=e.response)||void 0===o?void 0:o.status,statusText:null===(a=e.response)||void 0===a?void 0:a.statusText,message:e.message},e),!e.response)return s.Z.warn("Network connectivity issue detected",{message:e.message||"Network error"}),Promise.reject(e);if(401===e.response.status&&!i._retry){s.Z.warn("Token expired or invalid, removing tokens"),localStorage.removeItem("jwt_token"),localStorage.removeItem("refresh_token");let t=window.location.pathname;return["/dashboard","/tasks","/profile"].some(e=>t.startsWith(e))&&(window.location.href="/login"),Promise.reject(e)}return e.response.status>=500&&s.Z.error("Backend API unavailable",{status:e.response.status,statusText:e.response.statusText,url:null===(n=e.config)||void 0===n?void 0:n.url}),403===e.response.status&&(s.Z.warn("Unauthorized access attempt",{status:e.response.status,url:null===(l=e.config)||void 0===l?void 0:l.url,data:e.response.data}),window.location.href="/login"),Promise.reject(e)}),t.Z=a},9636:function(e,t,r){"use strict";var o=r(8223),s=r(7903);class a{async login(e){var t,r,a,n,l;try{s.Z.info("Attempting user login",{email:e.email});let r=await o.Z.post("/auth/login",e);if(r.data&&r.data.token){let{token:e,refresh_token:o}=r.data;return localStorage.setItem("jwt_token",e),o&&localStorage.setItem("refresh_token",o),s.Z.info("User login successful",{user_id:null===(t=r.data.user)||void 0===t?void 0:t.user_id}),{user:r.data.user,token:e}}return s.Z.warn("Login failed - no token returned",{email:e.email}),null}catch(t){throw s.Z.error("Login error",{email:e.email,error:(null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||t.message},t),Error((null===(l=t.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||"Login failed")}}async signup(e){var t,r,a,n,l;try{s.Z.info("Attempting user signup",{email:e.email});let r=await o.Z.post("/auth/signup",e);if(r.data&&r.data.token){let{token:e,refresh_token:o}=r.data;return localStorage.setItem("jwt_token",e),o&&localStorage.setItem("refresh_token",o),s.Z.info("User signup successful",{user_id:null===(t=r.data.user)||void 0===t?void 0:t.user_id}),{user:r.data.user,token:e}}return s.Z.warn("Signup failed - no token returned",{email:e.email}),null}catch(t){throw s.Z.error("Signup error",{email:e.email,error:(null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||t.message},t),Error((null===(l=t.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||"Signup failed")}}logout(){let e=this.getToken();s.Z.info("User logout initiated",{has_token:!!e}),localStorage.removeItem("jwt_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",s.Z.info("User logout completed")}async getCurrentUser(){try{var e;let t=await o.Z.get("/auth/me");return s.Z.info("Current user info retrieved",{user_id:null===(e=t.data)||void 0===e?void 0:e.user_id}),t.data}catch(e){return s.Z.error("Error getting current user info",{error:e.message},e),null}}async validateToken(){var e,t;try{let t=localStorage.getItem("jwt_token");if(!t)return s.Z.info("Token validation failed - no token found"),{valid:!1,user_id:""};s.Z.debug("Validating JWT token");let r=await o.Z.post("/auth/validate",{},{headers:{Authorization:"Bearer ".concat(t)}});return s.Z.info("Token validation successful",{user_id:null===(e=r.data)||void 0===e?void 0:e.user_id}),r.data}catch(e){return s.Z.error("Token validation error",{error:e.message,status:null===(t=e.response)||void 0===t?void 0:t.status},e),{valid:!1,user_id:"",error:e.message}}}isAuthenticated(){let e=localStorage.getItem("jwt_token");return s.Z.debug("Authentication check",{is_authenticated:!!e}),!!e}getToken(){return localStorage.getItem("jwt_token")}getRefreshToken(){return localStorage.getItem("refresh_token")}async refreshToken(){try{let e=this.getRefreshToken();if(s.Z.info("Attempting token refresh"),!e)return s.Z.warn("Token refresh failed - no refresh token available"),null;let t=await o.Z.post("/auth/refresh",{},{headers:{Authorization:"Bearer ".concat(e)}});if(t.data&&t.data.access_token){let e=t.data.access_token;return localStorage.setItem("jwt_token",e),t.data.refresh_token&&localStorage.setItem("refresh_token",t.data.refresh_token),s.Z.info("Token refresh successful"),e}return s.Z.warn("Token refresh failed - no access token in response"),null}catch(o){var e,t,r,a;throw s.Z.error("Token refresh error",{error:(null===(t=o.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||o.message},o),this.logout(),Error((null===(a=o.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Token refresh failed")}}}t.Z=new a},7903:function(e,t){"use strict";class r{generateSessionId(){return"sess_"+Math.random().toString(36).substr(2,9)+"_"+Date.now()}shouldLog(e){let t=r.LOG_LEVELS[r.currentLogLevel];return r.LOG_LEVELS[e]>=t}formatLog(e){return"[".concat(e.timestamp,"] [").concat(e.level.toUpperCase(),"] [Session: ").concat(e.session_id,"] - ").concat(e.message).concat(e.context?" | Context: ".concat(JSON.stringify(e.context)):"")}logToConsole(e){let t=this.formatLog(e);switch(e.level){case"error":console.error(t);break;case"warn":console.warn(t);break;case"info":console.info(t);break;case"debug":console.debug(t);break;default:console.log(t)}}async logToRemote(e){}info(e,t){if(this.shouldLog("INFO")){let r={timestamp:new Date().toISOString(),level:"info",message:e,context:t,session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}warn(e,t){if(this.shouldLog("WARN")){let r={timestamp:new Date().toISOString(),level:"warn",message:e,context:t,session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}error(e,t,r){if(this.shouldLog("ERROR")){let o={timestamp:new Date().toISOString(),level:"error",message:e,context:{...t,...r&&{error_message:r.message,error_stack:r.stack,error_name:r.name}},session_id:this.sessionId};this.logToConsole(o),this.logToRemote(o)}}debug(e,t){if(this.shouldLog("DEBUG")){let r={timestamp:new Date().toISOString(),level:"debug",message:e,context:t,session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}setLogLevel(e){r.LOG_LEVELS.hasOwnProperty(e)?r.currentLogLevel=e:console.warn("Invalid log level: ".concat(e,". Valid levels: ").concat(Object.keys(r.LOG_LEVELS).join(", ")))}constructor(){this.sessionId=this.generateSessionId()}}r.LOG_LEVELS={DEBUG:0,INFO:1,WARN:2,ERROR:3},r.currentLogLevel="INFO";let o=new r;t.Z=o}},function(e){e.O(0,[301,648,971,117,744],function(){return e(e.s=7129)}),_N_E=e.O()}]);