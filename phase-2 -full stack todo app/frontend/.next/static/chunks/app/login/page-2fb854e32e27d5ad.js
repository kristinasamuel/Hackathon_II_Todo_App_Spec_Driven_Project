(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{3471:function(e,t,r){Promise.resolve().then(r.bind(r,8991))},8991:function(e,t,r){"use strict";r.r(t);var s=r(7437),o=r(2265),a=r(7648),n=r(9376),l=r(9636);t.default=()=>{let[e,t]=(0,o.useState)(""),[r,i]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),[u,m]=(0,o.useState)(!1),g=(0,n.useRouter)(),h=async t=>{t.preventDefault(),m(!0),c("");try{await l.Z.login({email:e,password:r})?(g.push("/dashboard"),g.refresh()):c("Invalid email or password")}catch(e){c(e.message||"Login failed")}finally{m(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Sign in to your TaskManager Pro account"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,s.jsxs)("form",{className:"space-y-6",onSubmit:h,children:[d&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,s.jsx)("p",{className:"text-sm text-red-700 font-medium",children:d})]})}),(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,s.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors duration-200 text-gray-900 placeholder-gray-500",placeholder:"Enter your email address"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors duration-200 text-gray-900 placeholder-gray-500",placeholder:"Enter your password"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200",children:"Forgot your password?"})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:u,className:"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):"Sign In"})})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,s.jsx)(a.default,{href:"/signup",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200",children:"Sign up"})]})})]}),(0,s.jsx)("div",{className:"mt-8 text-center",children:(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["By signing in, you agree to our"," ",(0,s.jsx)("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:"Terms of Service"})," ","and"," ",(0,s.jsx)("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:"Privacy Policy"})]})})]})})}},8223:function(e,t,r){"use strict";var s=r(3464),o=r(7903);let a=s.Z.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("jwt_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(o.Z.error("API request error",{error:e.message},e),Promise.reject(e))),a.interceptors.response.use(e=>e,async e=>{var t,r,s,a,n,l;let i=e.config;if(o.Z.error("API response error",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(r=e.config)||void 0===r?void 0:r.method,status:null===(s=e.response)||void 0===s?void 0:s.status,statusText:null===(a=e.response)||void 0===a?void 0:a.statusText,message:e.message},e),!e.response)return o.Z.warn("Network connectivity issue detected",{message:e.message||"Network error"}),Promise.reject(e);if(401===e.response.status&&!i._retry){o.Z.warn("Token expired or invalid, removing tokens"),localStorage.removeItem("jwt_token"),localStorage.removeItem("refresh_token");let t=window.location.pathname;return["/dashboard","/tasks","/profile"].some(e=>t.startsWith(e))&&(window.location.href="/login"),Promise.reject(e)}return e.response.status>=500&&o.Z.error("Backend API unavailable",{status:e.response.status,statusText:e.response.statusText,url:null===(n=e.config)||void 0===n?void 0:n.url}),403===e.response.status&&(o.Z.warn("Unauthorized access attempt",{status:e.response.status,url:null===(l=e.config)||void 0===l?void 0:l.url,data:e.response.data}),window.location.href="/login"),Promise.reject(e)}),t.Z=a},9636:function(e,t,r){"use strict";var s=r(8223),o=r(7903);class a{async login(e){var t,r,a,n,l;try{o.Z.info("Attempting user login",{email:e.email});let r=await s.Z.post("/auth/login",e);if(r.data&&r.data.token){let{token:e,refresh_token:s}=r.data;return localStorage.setItem("jwt_token",e),s&&localStorage.setItem("refresh_token",s),o.Z.info("User login successful",{user_id:null===(t=r.data.user)||void 0===t?void 0:t.user_id}),{user:r.data.user,token:e}}return o.Z.warn("Login failed - no token returned",{email:e.email}),null}catch(t){throw o.Z.error("Login error",{email:e.email,error:(null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||t.message},t),Error((null===(l=t.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||"Login failed")}}async signup(e){var t,r,a,n,l;try{o.Z.info("Attempting user signup",{email:e.email});let r=await s.Z.post("/auth/signup",e);if(r.data&&r.data.token){let{token:e,refresh_token:s}=r.data;return localStorage.setItem("jwt_token",e),s&&localStorage.setItem("refresh_token",s),o.Z.info("User signup successful",{user_id:null===(t=r.data.user)||void 0===t?void 0:t.user_id}),{user:r.data.user,token:e}}return o.Z.warn("Signup failed - no token returned",{email:e.email}),null}catch(t){throw o.Z.error("Signup error",{email:e.email,error:(null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||t.message},t),Error((null===(l=t.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||"Signup failed")}}logout(){let e=this.getToken();o.Z.info("User logout initiated",{has_token:!!e}),localStorage.removeItem("jwt_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",o.Z.info("User logout completed")}async getCurrentUser(){try{var e;let t=await s.Z.get("/auth/me");return o.Z.info("Current user info retrieved",{user_id:null===(e=t.data)||void 0===e?void 0:e.user_id}),t.data}catch(e){return o.Z.error("Error getting current user info",{error:e.message},e),null}}async validateToken(){var e,t;try{let t=localStorage.getItem("jwt_token");if(!t)return o.Z.info("Token validation failed - no token found"),{valid:!1,user_id:""};o.Z.debug("Validating JWT token");let r=await s.Z.post("/auth/validate",{},{headers:{Authorization:"Bearer ".concat(t)}});return o.Z.info("Token validation successful",{user_id:null===(e=r.data)||void 0===e?void 0:e.user_id}),r.data}catch(e){return o.Z.error("Token validation error",{error:e.message,status:null===(t=e.response)||void 0===t?void 0:t.status},e),{valid:!1,user_id:"",error:e.message}}}isAuthenticated(){let e=localStorage.getItem("jwt_token");return o.Z.debug("Authentication check",{is_authenticated:!!e}),!!e}getToken(){return localStorage.getItem("jwt_token")}getRefreshToken(){return localStorage.getItem("refresh_token")}async refreshToken(){try{let e=this.getRefreshToken();if(o.Z.info("Attempting token refresh"),!e)return o.Z.warn("Token refresh failed - no refresh token available"),null;let t=await s.Z.post("/auth/refresh",{},{headers:{Authorization:"Bearer ".concat(e)}});if(t.data&&t.data.access_token){let e=t.data.access_token;return localStorage.setItem("jwt_token",e),t.data.refresh_token&&localStorage.setItem("refresh_token",t.data.refresh_token),o.Z.info("Token refresh successful"),e}return o.Z.warn("Token refresh failed - no access token in response"),null}catch(s){var e,t,r,a;throw o.Z.error("Token refresh error",{error:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||s.message},s),this.logout(),Error((null===(a=s.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Token refresh failed")}}}t.Z=new a},7903:function(e,t){"use strict";class r{generateSessionId(){return"sess_"+Math.random().toString(36).substr(2,9)+"_"+Date.now()}shouldLog(e){let t=r.LOG_LEVELS[r.currentLogLevel];return r.LOG_LEVELS[e]>=t}formatLog(e){return"[".concat(e.timestamp,"] [").concat(e.level.toUpperCase(),"] [Session: ").concat(e.session_id,"] - ").concat(e.message).concat(e.context?" | Context: ".concat(JSON.stringify(e.context)):"")}logToConsole(e){let t=this.formatLog(e);switch(e.level){case"error":console.error(t);break;case"warn":console.warn(t);break;case"info":console.info(t);break;case"debug":console.debug(t);break;default:console.log(t)}}async logToRemote(e){}info(e,t){if(this.shouldLog("INFO")){let r={timestamp:new Date().toISOString(),level:"info",message:e,context:t,session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}warn(e,t){if(this.shouldLog("WARN")){let r={timestamp:new Date().toISOString(),level:"warn",message:e,context:t,session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}error(e,t,r){if(this.shouldLog("ERROR")){let s={timestamp:new Date().toISOString(),level:"error",message:e,context:{...t,...r&&{error_message:r.message,error_stack:r.stack,error_name:r.name}},session_id:this.sessionId};this.logToConsole(s),this.logToRemote(s)}}debug(e,t){if(this.shouldLog("DEBUG")){let r={timestamp:new Date().toISOString(),level:"debug",message:e,context:t,session_id:this.sessionId};this.logToConsole(r),this.logToRemote(r)}}setLogLevel(e){r.LOG_LEVELS.hasOwnProperty(e)?r.currentLogLevel=e:console.warn("Invalid log level: ".concat(e,". Valid levels: ").concat(Object.keys(r.LOG_LEVELS).join(", ")))}constructor(){this.sessionId=this.generateSessionId()}}r.LOG_LEVELS={DEBUG:0,INFO:1,WARN:2,ERROR:3},r.currentLogLevel="INFO";let s=new r;t.Z=s}},function(e){e.O(0,[301,648,971,117,744],function(){return e(e.s=3471)}),_N_E=e.O()}]);